var h=(n,t,s)=>new Promise((r,e)=>{var o=a=>{try{u(s.next(a))}catch(f){e(f)}},i=a=>{try{u(s.throw(a))}catch(f){e(f)}},u=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,i);u((s=s.apply(n,t)).next())});import{c as d,r as P,a as y,b as v,d as E,_ as I,e as k,o as R,f as w,g as A,h as O,s as b,i as j,j as C,C as D,I as x,k as M}from"./vendor.7c48829c.js";const S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}};S();const V="modulepreload",L={},W="/assets/erpnext_frontend/main/",p=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${W}${r}`,r in L)return;L[r]=!0;const e=r.endsWith(".css"),o=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":V,e||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),e)return new Promise((u,a)=>{i.addEventListener("load",u),i.addEventListener("error",a)})})).then(()=>t())},_=d({url:"frappe.auth.get_logged_user",cache:"User",onError(n){n&&n.exc_type==="AuthenticationError"&&m.push({name:"LoginPage"})}});function g(){let t=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return t==="Guest"&&(t=null),t}const l=P({login:d({url:"login",makeParams({email:n,password:t}){return{usr:n,pwd:t}},onSuccess(n){_.reload(),l.user=g(),l.login.reset(),m.replace(n.default_route||"/")}}),logout:d({url:"logout",onSuccess(){_.reset(),l.user=g(),m.replace({name:"Login"})}}),user:g(),isLoggedIn:y(()=>!!l.user)}),$=[{path:"/",name:"Home",component:()=>p(()=>import("./Home.fb72999a.js"),["assets/Home.fb72999a.js","assets/vendor.7c48829c.js","assets/vendor.46449452.css"]),redirect:{name:"MainPage"}},{name:"MainPage",path:"/mainpage",component:()=>p(()=>import("./MainPage.2bfeaa96.js"),["assets/MainPage.2bfeaa96.js","assets/vendor.7c48829c.js","assets/vendor.46449452.css","assets/workspaceUtils.f25797f8.js"])},{name:"Login",path:"/account/login",component:()=>p(()=>import("./Login.8e807ece.js"),["assets/Login.8e807ece.js","assets/vendor.7c48829c.js","assets/vendor.46449452.css"])},{name:"MainPageWithDetails",path:"/MainPageWithDetails",component:()=>p(()=>import("./MainPageWithDetails.acf14aaf.js"),["assets/MainPageWithDetails.acf14aaf.js","assets/MainPageWithDetails.40b50a4a.css","assets/vendor.7c48829c.js","assets/vendor.46449452.css","assets/workspaceUtils.f25797f8.js"])}];let m=v({history:E("/main"),routes:$});m.beforeEach((n,t,s)=>h(void 0,null,function*(){let r=l.isLoggedIn;try{yield _.promise}catch(e){r=!1}n.meta.requiresAuth&&!r&&(window.location.href="/mainpage"),s()}));const q={};function N(n,t){const s=k("router-view");return R(),w("div",null,[A(s)])}var T=I(q,[["render",N]]);let c=O(T);b("resourceFetcher",M);c.use(m);c.use(j);c.component("Button",C);c.component("Card",D);c.component("Input",x);c.mount("#app");export{l as s};
